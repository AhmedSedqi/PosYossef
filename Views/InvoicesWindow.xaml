<Window x:Class="PosYossef.Views.InvoicesWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="إدارة الفواتير" 
        Height="700" Width="1200"
        WindowStartupLocation="Manual"
        WindowStyle="SingleBorderWindow"
        ResizeMode="CanResize">

    <Grid>
        <!-- العمود الأول -->
        <Border Width="600" Background="#f5f5f5" HorizontalAlignment="Left">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- عرض الفاتورة -->
                <Border Grid.Row="0" Margin="10" BorderBrush="#CCCCCC" BorderThickness="1" Background="White">
                    <ScrollViewer>
                        <TextBlock x:Name="InvoiceDetailsText" 
                                   Text="تفاصيل الفاتورة ستظهر هنا..."
                                   Padding="20"
                                   FontSize="16"
                                   TextWrapping="Wrap"/>
                    </ScrollViewer>
                </Border>

                <!-- أزرار العمود الأول -->
                <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Left" Margin="0,5">
                    <Button Style="{StaticResource OkButtonStyle}" Width="40" Height="40" 
                            Margin="40,0,240,5" ToolTip="حذف الفاتورة" Background="Red">
                        <StackPanel Orientation="Horizontal">
                            <Image Source="/Resources/Icons/trash.png" Width="20" Height="20"/>
                        </StackPanel>
                    </Button>

                    <Button Style="{StaticResource ActionButtonStyle}" Width="40" Height="40"  Margin="0,0,25,5" ToolTip="طباعة الفاتورة">
                        <StackPanel Orientation="Horizontal">
                            <Image Source="/Resources/Icons/printer.png" Width="20" Height="20"/>
                        </StackPanel>
                    </Button>

                    <Button Style="{StaticResource ActionButtonStyle}" Width="40" Height="40" Margin="0,0,25,5" ToolTip="إرسال الفاتورة عبر الواتساب">
                        <StackPanel Orientation="Horizontal">
                            <Image Source="/Resources/Icons/whatsapp.png" Width="20" Height="20"/>
                        </StackPanel>
                    </Button>

                    <Button Style="{StaticResource ActionButtonStyle}" Width="40" Height="40" Margin="0,0,25,5" ToolTip="تعديل الفاتورة">
                        <StackPanel Orientation="Horizontal">
                            <Image Source="/Resources/Icons/editfact.png" Width="20" Height="20"/>
                        </StackPanel>
                    </Button>

                    
                </StackPanel>
            </Grid>
        </Border>

        <!-- العمود الثاني -->
        <Grid Margin="600,0,0,0" Background="#f5f5f5">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- فلترة الفواتير -->
            <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="10" VerticalAlignment="Center" HorizontalAlignment="Center">
                <DatePicker x:Name="FilterDatePicker"
                            Width="200"
                            FontSize="16"
                            Margin="0,0,10,0"
                            SelectedDate="{Binding FilterDate}"/>

                <Border Margin="30,0,0,0" 
                        BorderBrush="Gray" 
                        BorderThickness="1" 
                        CornerRadius="10" 
                        Padding="5">
                    <StackPanel Orientation="Horizontal">
                        <Image Source="/Resources/Icons/search.png" Width="25" Height="25"/>
                        <TextBox x:Name="SearchInvoiceTextBox" BorderThickness="0"
                                 Text="... بحث" FontFamily="Calibri" Foreground="Gray"
                                 Width="200" HorizontalContentAlignment="Right"
                                 FontSize="18" 
                                 Margin="5,0,0,0"
                                 GotFocus="SearchBox_GotFocus"
                                 LostFocus="SearchBox_LostFocus"/>
                    </StackPanel>
                </Border>
            </StackPanel>

            <!-- قائمة الفواتير -->
            <DataGrid Grid.Row="1" Margin="0,0,10,0" Background="#F9F5E3"
                      AutoGenerateColumns="False" 
                      SelectionMode="Single"
                      SelectionChanged="InvoicesGrid_SelectionChanged">
                
                <DataGrid.Resources>
                    <Style TargetType="DataGridColumnHeader">
                        <Setter Property="HorizontalContentAlignment" Value="Center"/>
                        <Setter Property="FontFamily" Value="Calibri"/>
                        <Setter Property="FontSize" Value="14"/>
                        <Setter Property="FontWeight" Value="Bold"/>
                    </Style>

                    <Style x:Key="CenterTextStyle" TargetType="TextBlock">
                        <Setter Property="FontFamily" Value="Calibri"/>
                        <Setter Property="FontSize" Value="13"/>
                        <Setter Property="TextAlignment" Value="Right"/>
                        <Setter Property="VerticalAlignment" Value="Center"/>
                    </Style>
                </DataGrid.Resources>

                <DataGrid.Columns>
                    <DataGridTextColumn Header="التاريخ" Width="1*" Binding="{Binding Date,StringFormat=dd/MM/yyyy}"/>
                    <DataGridTextColumn Header="الباقي" Width="1*" Binding="{Binding RemainingAmount, StringFormat={}{0:C}}"/>
                    <DataGridTextColumn Header="المجموع" Width="1*" Binding="{Binding Total,StringFormat={}{0:C}}"/>
                    <DataGridTextColumn Header="اسم الزبون" Width="1*" Binding="{Binding CustomerName}"/>
                    <DataGridTextColumn Header="رقم الفاتورة" Width="1*" Binding="{Binding InvoiceNumber}"/>

                </DataGrid.Columns>
            </DataGrid>

            <!-- أزرار العمود الثاني -->
            <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,10">
                <Button Style="{StaticResource ActionButtonStyle}" Width="100" Height="40" Margin="0,0,35,0" Content="طباعة"
                        FontFamily="Calibri" FontSize="20" FontWeight="Bold" ToolTip="طباعة الفواتير المحددة"/>
                <Button Style="{StaticResource ActionButtonStyle}" Width="100" Height="40" Margin="0,0,300,0" Content="عرض"
                        FontFamily="Calibri" FontSize="20" FontWeight="Bold" ToolTip="عرض الفواتير المحددة"/>
                <Button Style="{StaticResource ActionButtonStyle}" Width="100" Height="40" Margin="0,0,5,0" Content="حذف"
                        FontFamily="Calibri" FontSize="20" FontWeight="Bold" Background="Red" ToolTip="حذف الفواتير المحددة"/>
            </StackPanel>
        </Grid>
    </Grid>
</Window>
